#!/bin/bash
# –°–∫—Ä–∏–ø—Ç –¥–ª—è –¥–µ–ø–ª–æ—è –±–æ—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

echo "üöÄ –ù–∞—á–∏–Ω–∞–µ–º –¥–µ–ø–ª–æ–π Group Changer Bot..."

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –º—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
if [ ! -f "bot.py" ]; then
    echo "‚ùå –û—à–∏–±–∫–∞: —Ñ–∞–π–ª bot.py –Ω–µ –Ω–∞–π–¥–µ–Ω. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞."
    exit 1
fi

# –ü—É—à–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ git (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
echo "üì§ –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ git..."
git add .
git commit -m "Deploy: –≥–æ—Ç–æ–≤ –∫ –¥–µ–ø–ª–æ—é" || echo "–ù–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è –∫–æ–º–º–∏—Ç–∞"
git push origin main || echo "–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–ø—É—à–∏—Ç—å (–≤–æ–∑–º–æ–∂–Ω–æ, —É–∂–µ –∑–∞–ø—É—à–µ–Ω–æ)"

echo ""
echo "‚úÖ –õ–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ git"
echo ""
echo "üìã –¢–µ–ø–µ—Ä—å –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:"
echo ""
echo "ssh admin@your-server"
echo "cd group_changer_bot"
echo "git pull origin main"
echo "source venv/bin/activate"
echo "pip install -r requirements.txt"
echo "python bot.py"
echo ""
echo "–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ screen –¥–ª—è —Ñ–æ–Ω–æ–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞:"
echo "screen -S bot"
echo "source venv/bin/activate"
echo "python bot.py"
echo "# –ù–∞–∂–º–∏—Ç–µ Ctrl+A, –∑–∞—Ç–µ–º D –¥–ª—è –æ—Ç—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è"

